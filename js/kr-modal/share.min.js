(()=>{function a(){document.getElementById("kr-share-modal").classList.add("show"),setTimeout(()=>{document.getElementById("kr-share-modal").classList.add("active")},1)}function d(){document.getElementById("kr-share-modal").classList.remove("active"),setTimeout(()=>{document.getElementById("kr-share-modal").classList.remove("show")},300)}function c(e){let o=document.querySelector('meta[property="og:url"]').getAttribute("content"),n=document.querySelector('meta[property="og:title"]').getAttribute("content"),r=document.querySelector('meta[property="og:description"]').getAttribute("content"),i=document.querySelector('meta[property="og:site_name"]').getAttribute("content"),l=e.replaceAll("$URL",o).replaceAll("$TITLE",n).replaceAll("$SUMMARY",r).replaceAll("$SITE",i);window.open(l,"_blank")}function t(){let e=document.getElementById("kr-share-qr");if(e){if(e.innerHTML="",typeof QRCodeStyling>"u"){e.innerHTML='<div style="width:150px;height:150px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:12px;color:#888;">\u4E8C\u7EF4\u7801\u52A0\u8F7D\u5931\u8D25</div>',console.warn("QRCodeStyling library not loaded (possibly blocked by ad blocker)");return}new QRCodeStyling({width:150,height:150,data:document.querySelector('meta[property="og:url"]').getAttribute("content"),image:document.querySelector('link[rel="icon"]').getAttribute("href"),dotsOptions:{color:"#78ce79",type:"extra-rounded"},backgroundOptions:{color:"transparent"},imageOptions:{crossOrigin:"anonymous",margin:1}}).append(e)}else requestAnimationFrame(t)}t();window.addEventListener("pjax:complete",t);window.krOpenShareModal=a;window.krCloseShareModal=d;window.krShareModalOpenPlatform=c;window.initQRCode=t;})();
